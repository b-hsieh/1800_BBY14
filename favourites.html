<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link rel="stylesheet" href="./styles/my_style.css" />
  <link rel="stylesheet" href="./styles/bootstrapColourReplace.css">

  <!-- Firebase 8 CDNs-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/ui/4.8.1/firebase-ui-auth.js"></script>

  <!-- Link to the api keys for your firebase project -->
  <!-- <script src="./scripts/firebaseAPI.js"></script> -->

  <title>COMP 1800 WebApp</title>
</head>

<body>

  <header id="topnav">
    <nav class="navbar navbar-expand-lg navbar-dark bg-danger">
      <div class="container-fluid">
        <a class="navbar-brand" href="./main.html">
          <img src="./images/logo.png" alt="" width="30" height="24" class="d-inline-block align-text-top">
          Restaurant Royale
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup"
          aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="navbar-nav">
            <a class="nav-link active" aria-current="page" href="./main.html">Home</a>
            <a class="nav-link active" href="./favourites.html">Favourites</a>
            <a class="nav-link active" href="./friends.html">Friends</a>
            <a class="nav-link active" id="loginStat" href="./login.html">Login</a>
          </div>
        </div>
      </div>
    </nav>
  </header>

  <!--Content-->

  <div class="px-4 pt-5 my-5 text-center border-bottom">
    <div class="overflow-hidden" style="max-height: 30vh;">
      <div class="container px-5">
        <img src="./images/GroupRestaurant.jpg" class="img-fluid border rounded-3 shadow-lg mb-1" alt="SplashImage"
          width="auto" height="auto" loading="lazy">
      </div>
    </div>
    <br /><br />
    <h1 class="display-4 fw-bold">Favourite Restaurants</h1>
    <div class="col-lg-6 mx-auto">
      <a class="btn btn-danger" href="./addfavourite.html" role="button">Add Favourite</a>
      <br /><br />
    </div>
  </div>



  <div class="container">
    <div id="favCard1" class="card mb-3" style="max-width: 100vw; margin-top: 20px;">
      <div class="row g-0">
        <div class="col-md-4">
          <img src="./images/Gourmet.jpg" class="img-fluid rounded-start" alt="...">
        </div>
        <div class="col-md-8">
          <div class="card-body">
            <h5 id="restTitle" class="card-title"></h5>
            <p id="rDesc" class="card-text">

            </p>

          </div>
        </div>
      </div>
    </div>



    <div id="favCard2" class="card mb-3" style="max-width: 100vw; margin-top: 20px;">
      <div class="row">
        <div class="col">
          <img src="./images/Restaurant.jpg" class="img-fluid rounded-start" alt="...">
        </div>
        <div class="col">
          <div class="card-body">
            <h5 class="card-title">Mendies</h5>
            <p class="card-text">
              This restaurant has it all. From grilled steaks to award-winning pastas,
              there is something for everyone. Mendies is especially known for its wide variety of soups.
              Every diner is guaranteed to be satisfied!
            </p>
          </div>
        </div>
      </div>
    </div>



    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"></script>
    <script src="scripts/firebaseAPI.js"></script>


    <script>

      /* function displayFavourite() {
         db.collection("favourites").get()
               .then(allRestaurants => {
                 allRestaurants.forEach(doc => {
                   var restName = doc.data().name;
                   console.log(restName);
                   document.getElementById(restName).innerText = name;
                 })
               })
         }
         displayFavourite();*/

      function writeRest() {
        //define a variable for the collection you want to create in Firestore to populate data
        var restRef = db.collection("restaurants");

        restRef.add({
          code: "ELT",
          description: "Fantastic food, service, friendly staff and reasonable prices, make this the best place to eat!! Did I mention the food?!!? You donâ€™t usually get what you pay for. At this great place, you definitely do!!",
          location: "bby",
          name: "El Loco Taco"
        });
        restRef.add({
          code: "LPH",
          description: "The finest ingredients are brought together with love and care, then slow cooked to perfection. Yes, the old ways are still best at Los Pollos Hermanos. But don't take my word for it. One taste, and you'll know.",
          location: "bby",
          name: "Los Pollos Hermanos"
        });
        restRef.add({
          code: "NOK",
          description: "Casual, modern locale with bar & al fresco seating, furnishing pizza, housemade pasta & drinks.",
          location: "van",
          name: "Nook"
        });
        restRef.add({
          code: "PHC",
          description: "Relaxed spot for noodle soups & other Vietnamese comfort foods in a contemporary atmosphere.",
          location: "bby",
          name: "Pho Century"
        });
        restRef.add({
          code: "TEN",
          description: "Eastern European specialties are presented in a cozy antiques-filled room with a back patio.",
          location: "bby",
          name: "Tenen Restaurant"
        });
        restRef.add({
          code: "NAR",
          description: "Fusion style Korean food with flavorful sauces and good to share plates.",
          location: "bby",
          name: "Na-Re Korean Kitchen"
        });
        restRef.add({
          code: "MDS",
          description: "Low-key eatery offering familiar Indian dishes & vegetarian fare plus dosas in a modest setup.",
          location: "van",
          name: "Medras Spice"
        });
        restRef.add({
          code: "NBN",
          description: "Relaxed cafe offering Taiwanese fare & a dim sum menu, plus teas & smoothies, with delivery.",
          location: "bby",
          name: "No. 1 Beef Noodle"
        });
      }


      function displayFavRests() {
        firebase.auth().onAuthStateChanged(user => {
          if (user) {
            var currentUser = db.collection("users").doc(user.uid)
            var userID = user.uid;
            currentUser.collection("favourites").get()
              .then(allRests => {
                allRests.forEach(doc => {
                  var restName = doc.data().name; //gets the name field
                  var restID = doc.data().code; //gets the unique ID field
                  console.log(restID);
                  document.getElementById(restID).innerText = restName;
                })

              })
          } else {
            console.log("no user signed in");
          }
        })
      }
      displayFavRests();


    </script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    -->
</div>
</body>

</html>